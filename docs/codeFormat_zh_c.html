<h1>SnowMio Studios C语言代码风格规范</h1>

<p><strong>版本</strong>: 第一次修订副本<br/><strong>修订日期</strong>: 2024/11/02</p>

<h2>1. 命名规范</h2>

<h3>1.1 变量命名</h3>

<ul><li>统一使用小驼峰式命名法（<code>itIsAnExampleName</code>）。</li><li>变量名应清晰表达含义，避免使用缩写（除非是业界公认的缩写，例如 <code>id</code>、<code>temp</code> 等）。</li><li>局部变量尽量简洁且具描述性。对于循环变量使用 <code>i</code>、<code>j</code> 等单字母可接受，但在嵌套循环中最好保持一致性和清晰度。</li></ul>

<h3>1.2 常量命名</h3>

<ul><li>使用全大写字母和下划线分隔的命名法（例如 <code>MAX_BUFFER_SIZE</code>）。</li><li>常量建议使用 <code>const</code> 或 <code>#define</code> 进行定义，并放在文件开头，或函数的定义部分，避免在代码中直接出现“魔法数字”。</li></ul>

<h3>1.3 函数命名</h3>

<ul><li>使用小驼峰式命名法，保持与变量命名一致。</li><li>函数命名尽量包含动词，使其语义明确。例如：<code>readFile()</code>、<code>calculateSum()</code> 等。</li></ul>

<h2>2. 注释规范</h2>

<h3>2.1 注释样式</h3>

<ul><li>统一使用 <code>/* */</code> 进行多行和单行注释，避免使用 <code>//</code> 形式。</li></ul>

<h3>2.2 注释内容</h3>

<ul><li>变量或函数命名无法自解释其用途时，应在定义的前一行添加注释解释用途。</li><li>每个函数应包含函数头注释，包括功能描述、输入参数、返回值，以及可能的错误处理等信息。</li><li>大段代码（如算法实现等）需进行详细说明，便于他人理解。</li><li><strong>注释示例：</strong>
<code>c
/* 计算并返回两个整数的和 */
int calculateSum(int a, int b) {
  return a + b;
}
</code></li></ul>

<h3>2.3 特殊注释</h3>

<ul><li><strong>TODO</strong> 注释：使用 <code>/* TODO: 描述待办任务 */</code> 格式标记尚未完成的代码。</li><li><strong>FIXME</strong> 注释：使用 <code>/* FIXME: 描述待修复问题 */</code> 格式标记待解决的已知问题。</li></ul>

<h2>3. 代码结构与格式</h2>

<h3>3.1 缩进与空格</h3>

<ul><li>统一使用 4 个空格进行缩进，禁止使用制表符（Tab）。</li><li>运算符两侧留出空格，例如 <code>a + b</code>。</li><li>函数、条件语句、循环语句的括号后加空格，保持代码清晰易读。</li></ul>

<h3>3.2 大括号位置</h3>

<ul><li>所有代码块（包括 <code>if</code>、<code>for</code>、<code>while</code>、<code>switch</code> 等）的大括号应另起一行。</li><li><p>即便代码块内只有一行语句，也应使用大括号，增强代码一致性与可维护性。</p><p><code>c
if (condition) {
  /* code block */
}
</code></p></li></ul>

<h3>3.3 函数长度限制</h3>

<ul><li>每个函数的代码长度不宜超过 50 行，若超出则考虑拆分为多个函数以增强可读性与可维护性。</li></ul>

<h2>4. 文件结构</h2>

<h3>4.1 头文件</h3>

<ul><li><p>每个头文件应包含 include guard，以防止重复包含。使用以下格式：
<code></code>`c
#ifndef FILE<em>NAME</em>H
#define FILE<em>NAME</em>H</p><p>/<em> code </em>/</p><p>#endif /* FILE<em>NAME</em>H */
<code></code>`</p></li></ul>

<h3>4.2 文件划分</h3>

<ul><li>按模块划分文件，每个模块应独立成文件。公共函数和变量定义在独立的头文件中。</li><li><code>.c</code> 文件只包含实现代码，<code>.h</code> 文件仅包含声明和必要的注释。</li></ul>

<h3>4.3 引用顺序</h3>

<ul><li>头文件引用应遵循以下顺序：<ol><li>项目自定义头文件。</li><li>第三方库头文件。</li><li>C 标准库头文件。</li></ol></li></ul>

<h2>5. 错误处理</h2>

<h3>5.1 错误返回值</h3>

<ul><li>函数应处理所有可能的错误并返回相应的错误代码（如 <code>-1</code> 或 <code>NULL</code>），且在函数头注释中说明每种返回情况的意义。</li><li>对于指针相关操作，返回空指针（<code>NULL</code>）以指示错误。</li></ul>

<h3>5.2 错误信息输出</h3>

<ul><li>使用统一的错误输出方式（如 <code>fprintf(stderr, ...)</code>），并尽量包含错误的具体信息，帮助调试。</li></ul>

<h2>6. 代码质量</h2>

<h3>6.1 避免硬编码</h3>

<ul><li>使用 <code>const</code> 或 <code>#define</code> 定义常量，避免在代码中直接写“魔法数字”。</li><li>推荐使用自定义的数据类型或枚举类型，提升代码可读性。</li></ul>

<h3>6.2 内存管理</h3>

<ul><li>动态分配的内存在使用完毕后应及时释放，避免内存泄漏。</li><li>尽量避免不必要的动态内存分配，优先使用栈内存。</li></ul>